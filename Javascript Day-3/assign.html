<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <button onclick="openAndClose()">Open Window</button>
    <button onclick="reloadPage()">Reload after 5 sec</button>
    <button onclick="backButton()">back and forword</button>
    <button onclick="changeLinkContent()">change a text content</button>
    <div ondblclick="showScreenSize()" id="screenInfo"
        style="font-size:18px; font-weight:bold; margin:20px; color:blue;">
        Loading screen size...
    </div>
    <a href="google.com">google</a>
    <a href="google.com">google</a>
    <a href="google.com">google</a>
    <a href="google.com">google</a>

    <ul>
        <li>Hello</li>
        <li>world</li>
        <li>js is ****</li>
    </ul>

    <form id="form" action="">

        <input type="email" name="email" value="email" id="">
        <input type="file" name="" id="" name="file" value="file">
        <input type="checkbox" name="" id="" name="ch" value="ch">
        <input type="text">
        <input type="button" value="btn">
        <input type="password" name="" id="">
        <input type="submit" value="submit">

    </form>

    <img src="../../../Desktop/E-Commerce/assets/cart.png" alt="Small image">
    <img src="../../../Desktop/E-Commerce/assets/cart.png" alt="Medium image">
    <img src="../../../Desktop/E-Commerce/assets/cart.png" alt="Large image">


    <script>
        // 1. Open a new window with a specific URL and size, then close it after 3 seconds using JavaScript.
        function openAndClose() {
            var w = window.open("https://google.com", "newWindow", "width=600,height=300");
            setTimeout(function () {
                w.close();
            }, 3000);
        }

        // 2. Display the browser's user agent string in an alert.
        // alert(navigator.userAgent);

        // 3. Use `navigator` to detect if the browser is online or offline and log the result.
        if (navigator.onLine) {
            console.log("The browser is online.");
        } else {
            console.log("The browser is offline.");
        }

        // 4. Write code to reload the current page after 5 seconds.
        function reloadPage() {
            setTimeout(function () {
                location.reload();
            }, 5000);
        }

        // 5. Get the current page URL, protocol, and hostname using `location` and log them.
        console.log("Current URL: " + location.href);
        console.log("Protocol: " + location.protocol);

        // 6. Use `history` to go back one page, then forward one page (write the code, don't actually run it).
        function backButton() {
            history.back();
            history.forward();
        }

        // 7. Show the screen width and height in a div -change the div content- on the page.
        function showScreenSize() {
            let width = window.screen.width;
            let height = window.screen.height;

            document.childNodes[1].childNodes[2].childNodes[9].innerHTML =
                "Screen Width: " + width + "px, Screen Height: " + height + "px";
        }

        // 8. Use `setTimeout` to change the content of a hyperlink -a- with a new content after 2 seconds, and provide a button to cancel it.
        function changeLinkContent() {
            var link = document.getElementsByTagName("a");
            for (var i = 0; i < link.length; i++) {
                link[i].textContent = "new google";
            }
        }

        // 9. Use `setInterval` to update the time  on the page title every second, and a button to stop it.

        setInterval(() => {
            document.title = Date();
        }, 1000);

        // 10. Show a confirm dialog asking "Do you want to continue?" and log the user's choice("user said yes", "user said no").
        // var userChoice = confirm("Do you want to continue?");

        if (userChoice) {
            console.log("user said yes");
        } else {
            console.log("user said no");
        }

        // 11. Select the first `<ul>` in the document and log its `childNodes` and `children` properties. Explain the difference in a comment.
        var ul = document.childNodes[1].childNodes[2].childNodes[19];

        console.log("childNodes:", ul.childNodes);
        console.log("children:", ul.children);

        // 12. Write a function that logs the tag names of all direct child elements of `<body>`.
        function getTagsName() {
            var bod = document.childNodes[1].childNodes[2].childNodes;
            for (var i = 0; i < bod.length; i++) {
                console.log(bod[i].tagName);
            }
        }

        // 13. Given a parent element, loop through its `childNodes` and log only the nodes that are elements (not text/comments).
        var parent = document.childNodes[1].childNodes[2].childNodes[19];

        // Loop through all childNodes
        parent.childNodes.forEach(node => {
            if (node.nodeType === 1) {
                console.log(node.tagName);
            }
        });

        // 14. Use `firstChild` and `firstElementChild` on a container and explain the difference in a comment.
        // firstChild -> return the first child like text
        // firstElementChild -> return the first element
        console.log("firstChild:", parent.firstChild);
        console.log("firstElementChild:", parent.firstElementChild);

        // 15. Write code to get all `<li>` elements inside a `<ul>` using `children` and explain the difference.
        var arr = []
        parent.childNodes.forEach(node => {
            if (node.nodeName !== "#text" || node.nodeType === 8) {
                arr.push(node)
            }
        });
        console.log(arr)

        // 17. Write a function that logs all sibling elements of a given element (excluding itself).
        function logSiblings(element) {
            var siblings = element.parentElement.children;

            for (var i = 0; i < siblings.length; i++) {
                if (siblings[i] !== element) {
                    console.log(siblings[i]);
                }
            }
        }

        logSiblings(parent)

        // 18. Use `nextSibling` and `nextElementSibling` to traverse from the first child to the last child of a `<ul>`, logging each node.
        var node = parent.firstChild;
        while (node) {
            console.log(node);
            node = node.nextSibling;
        }
        var elem = parent.firstElementChild;
        while (elem) {
            console.log(elem);
            elem = elem.nextElementSibling;
        }

        // 19. Count how many element children a given node has (not using `children.length`).
        console.log(
            parent.children.length
        )

        // 20. Write a function that takes the first form element and logs the names and values of all its input fields using the `elements` collection.
        function firstForm() {
            var form = document.getElementById("form").elements;
            for (var i = 0; i < form.length; i++) {
                console.log("name: " + form[i].name + " value: " + form[i].value)
            }
        }
        firstForm();

        // 21. Access all forms in the document using `document.forms` and log their names.
        for (let i = 0; i < document.forms.length; i++) {
            console.log("Form name:", document.forms[i].name);
        }

        //22. Access all images in the document using `document.images` and log their `src` attributes.
        for (let i = 0; i < document.images.length; i++) {
            console.log("Image src:", document.images[i].src);
        }

        // 23. Write a function that takes a form and disables all its input fields using the `elements` collection.
        function disableForm(form) {
            let fields = form.elements; // all inputs, selects, buttons, etc.
            for (let i = 0; i < fields.length; i++) {
                fields[i].disabled = true; // disable each field
            }
        }
        var f = document.getElementById("form")
        disableForm(f)

        // 24. Use `Array.from` to convert `document.images` to an array and filter images with width > 100px.
        const images = Array.from(document.images);

        const largeImages = images.filter(img => img.width > 100);

        largeImages.forEach(img => {
            console.log("Image src:", img.src, "| Width:", img.width);
        });

    </script>

</body>

</html>